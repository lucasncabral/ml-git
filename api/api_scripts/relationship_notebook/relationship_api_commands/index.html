
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://hpinc.github.io/ml-git/api/api_scripts/relationship_notebook/relationship_api_commands/">
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.1">
    
    
      
        <title>Relationship API Commands - ML-Git</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#02a6f2">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="light-blue" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#relationships-api-methods" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="ML-Git" class="md-header__button md-logo" aria-label="ML-Git" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ML-Git
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Relationship API Commands
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link md-tabs__link--active">
        Home
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../../developer_info/" class="md-tabs__link">
      Contributing to ML-Git
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="ML-Git" class="md-nav__button md-logo" aria-label="ML-Git" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    ML-Git
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Home
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Home" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../first_steps/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../advanced_scenarios/" class="md-nav__link">
        Additional Use Cases
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_4" type="checkbox" id="__nav_1_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_4">
          Architecture
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Architecture" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_4">
          <span class="md-nav__icon md-icon"></span>
          Architecture
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../mlgit_internals/" class="md-nav__link">
        Design
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../centralized_cache_and_objects/" class="md-nav__link">
        Cache and Objects
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../mutability_helper/" class="md-nav__link">
        Mutability Helper
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../plugins/" class="md-nav__link">
        Plugins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../resources_initialization/" class="md-nav__link">
        Resources Initialization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tabular_data/tabular_data/" class="md-nav__link">
        Working With Tabular Data
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_5" type="checkbox" id="__nav_1_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_5">
          Supported Storages
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Supported Storages" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_5">
          <span class="md-nav__icon md-icon"></span>
          Supported Storages
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../storage_configurations/" class="md-nav__link">
        Configurations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../minio_s3_configuration/" class="md-nav__link">
        MinIO
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../aws_s3_configuration/" class="md-nav__link">
        S3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../azure_configurations/" class="md-nav__link">
        Azure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../gdrive_configurations/" class="md-nav__link">
        Google Drive
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_6" type="checkbox" id="__nav_1_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_6">
          Commands
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Commands" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_6">
          <span class="md-nav__icon md-icon"></span>
          Commands
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../mlgit_commands/" class="md-nav__link">
        Using ML-Git CLI
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_6_2" type="checkbox" id="__nav_1_6_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_6_2">
          Using ML-Git API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Using ML-Git API" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_6_2">
          <span class="md-nav__icon md-icon"></span>
          Using ML-Git API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../quick_start/" class="md-nav__link">
        Quick Start
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../" class="md-nav__link">
        Methods
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../downloadable_environment/" class="md-nav__link">
        Docker Environment
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_8" type="checkbox" id="__nav_1_8" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1_8">
          ML-Git Step-by-Step Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="ML-Git Step-by-Step Guides" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_8">
          <span class="md-nav__icon md-icon"></span>
          ML-Git Step-by-Step Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../step_by_step_guides/" class="md-nav__link">
        Summary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_flow/" class="md-nav__link">
        Basic Flow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../clone_repository/" class="md-nav__link">
        Clone Repository
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../multiple_projects/" class="md-nav__link">
        Multiple Projects
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Relationship API Commands
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Relationship API Commands
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#notebook-prerequisites" class="md-nav__link">
    Notebook prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-context" class="md-nav__link">
    1 - Context
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-configuring" class="md-nav__link">
    2 - Configuring
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-methods" class="md-nav__link">
    3 - Methods
  </a>
  
    <nav class="md-nav" aria-label="3 - Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-get-entities" class="md-nav__link">
    3.1 - Get Entities
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-get-entity-versions" class="md-nav__link">
    3.2 - Get Entity Versions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-get-linked-entities" class="md-nav__link">
    3.3 - Get Linked Entities
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-get-entity-relationships" class="md-nav__link">
    3.4 - Get Entity Relationships
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35-get-project-entities-relationships" class="md-nav__link">
    3.5 - Get Project Entities Relationships
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mnist_notebook/mnist_random_forest_api/" class="md-nav__link">
        MNIST Random Forest API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mnist_notebook/mnist_random_forest_cli/" class="md-nav__link">
        MNIST Random Forest CLI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../multiple_datasets_notebook/checkout_with_sample/" class="md-nav__link">
        Checkout With Sample
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../multiple_datasets_notebook/multiple_datasets/" class="md-nav__link">
        Multiple Datasets
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../developer_info/" class="md-nav__link">
        Contributing to ML-Git
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="relationships-api-methods">Relationships API methods<a class="headerlink" href="#relationships-api-methods" title="Permanent link">&para;</a></h1>
<p>This notebook describes a basic flow in the context of relationships between entities with the API provided by ML-Git.</p>
<p>In it, we'll show you how to use the set of commands provided. You can check the documentation for more information: <a href="https://github.com/HPInc/ml-git/blob/main/docs/api/README.md">API documentation</a></p>
<h3 id="notebook-prerequisites">Notebook prerequisites<a class="headerlink" href="#notebook-prerequisites" title="Permanent link">&para;</a></h3>
<p>This notebook uses the GitHub API to access a reset and does Ml-Git operations on its contents, so before running this notebook, take the following steps:</p>
<ul>
<li>
<p>Have a GitHub <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account">SHH access key</a> so that you can use the repository information retrieval API.</p>
</li>
<li>
<p>Have a GitHub repository that the SHH key has access to.</p>
</li>
</ul>
<h3 id="1-context">1 - Context<a class="headerlink" href="#1-context" title="Permanent link">&para;</a></h3>
<p>In this notebook we consider a scenario of an ML-Git project with the following settings:</p>
<ul>
<li>
<p>A versioned config file in GitHub. Pointing to the entities' metadata repositories.</p>
</li>
<li>
<p>Each entity type having its metadata repository.</p>
</li>
<li>
<p>One mode entity (model-ex), two labels entities (labels-ex and labels-ex2) and one dataset entity (dataset-ex)</p>
</li>
<li>
<p>Entities have relationships defined at versioning time.</p>
</li>
</ul>
<p>This settings mentioned above can be better visualized in the diagram below:</p>
<p><img width="800" alt="portfolio_view" src="relationship_diagram.png"></p>
<h3 id="2-configuring">2 - Configuring<a class="headerlink" href="#2-configuring" title="Permanent link">&para;</a></h3>
<p>To use the methods, you will need to import the API and define some constants related to the user's credential:</p>
<p>Below are the constants described in the pre-requirements section, where:['removed'] should be replaced by the SHH access key and api_url can be modified if necessary as reported in the GitHub API documentation.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">ml_git.api</span> <span class="kn">import</span> <span class="n">MLGitAPI</span>
<span class="kn">from</span> <span class="nn">ml_git</span> <span class="kn">import</span> <span class="n">api</span>

<span class="n">github_token</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;removed&#39;</span><span class="p">]</span>
<span class="n">api_url</span> <span class="o">=</span> <span class="s1">&#39;https://api.github.com&#39;</span>
</code></pre></div>
<p>After defining the variables to configure, it will be possible to start a manager that will be responsible for operating on the github API.</p>
<div class="highlight"><pre><span></span><code><span class="n">api</span> <span class="o">=</span> <span class="n">MLGitAPI</span><span class="p">()</span>
<span class="n">manager</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">init_entity_manager</span><span class="p">(</span><span class="n">github_token</span><span class="p">,</span> <span class="n">api_url</span><span class="p">)</span>
</code></pre></div>
<p>We will use the manager to execute the commands in the next steps.</p>
<h3 id="3-methods">3 - Methods<a class="headerlink" href="#3-methods" title="Permanent link">&para;</a></h3>
<h4 id="31-get-entities">3.1 - Get Entities<a class="headerlink" href="#31-get-entities" title="Permanent link">&para;</a></h4>
<p>The <em>get_entities</em> method allows the user to get a list of entities being versioned in a project. For this, the user must inform the path to the configuration file, whether this path is a local directory or the name of a git repository. The path can be modified using the config_repository_name field, in our example case the configuration file is in 'user/mlgit-config-repository.</p>
<div class="highlight"><pre><span></span><code><span class="n">config_repository_name</span><span class="o">=</span><span class="s1">&#39;user/mlgit-config-repository&#39;</span>

<span class="n">project_entities</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">get_entities</span><span class="p">(</span><span class="n">config_repo_name</span><span class="o">=</span><span class="n">config_repository_name</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Entities found: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">project_entities</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Example of output object:</span><span class="se">\n</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">project_entities</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>
</code></pre></div>
<pre><code>Entities found: 4
Example of output object:
{
  "name": "model-ex",
  "entity_type": "model",
  "metadata": {
    "full_name": "user/mlgit-models",
    "git_url": "git@github.com:user/mlgit-models.git",
    "html_url": "https://github.com/user/mlgit-models",
    "owner_email": "user@gmail.com",
    "owner_name": "User Name"
  },
  "last_spec_version": {
    "version": 3,
    "tag": "test__model-ex__3",
    "mutability": "flexible",
    "categories": [
      "test"
    ],
    "amount": 3,
    "size": "27 Bytes",
    "storage": {
      "type": "s3h",
      "bucket": "mlgit-bucket"
    }
  }
}
</code></pre>
<p>As expected the API found 4 entities in the repository (dataset-ex, model-ex, labels-ex, labels-ex2).</p>
<h4 id="32-get-entity-versions">3.2 - Get Entity Versions<a class="headerlink" href="#32-get-entity-versions" title="Permanent link">&para;</a></h4>
<p>The <em>get_entity_version</em> method allows the user to get a list of spec versions found for an especific entity.</p>
<div class="highlight"><pre><span></span><code><span class="n">selected_entity</span> <span class="o">=</span> <span class="n">project_entities</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>

<span class="n">entity_versions</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">get_entity_versions</span><span class="p">(</span><span class="n">selected_entity</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">selected_entity</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">full_name</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Versions found: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">entity_versions</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Example of output object:</span><span class="se">\n</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">entity_versions</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">entity_versions</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
</code></pre></div>
<pre><code>Versions found: 3
Example of output object:
{
  "version": 1,
  "tag": "test__model-ex__1",
  "mutability": "flexible",
  "categories": [
    "test"
  ],
  "amount": 1,
  "size": "9 Bytes",
  "storage": {
    "type": "s3h",
    "bucket": "mlgit-bucket"
  }
}
</code></pre>
<p>As expected the API found 3 versions for the model-ex entity.</p>
<h4 id="33-get-linked-entities">3.3 - Get Linked Entities<a class="headerlink" href="#33-get-linked-entities" title="Permanent link">&para;</a></h4>
<p>The <em>get_linked_entities</em> method allows the user to get a list of linked entities found for an entity in a specific version.</p>
<div class="highlight"><pre><span></span><code><span class="n">entity_version</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">linked_entities_in_version</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">get_linked_entities</span><span class="p">(</span><span class="n">selected_entity</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">entity_version</span><span class="p">,</span> <span class="n">selected_entity</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">full_name</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Output: </span><span class="se">\n</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">linked_entities_in_version</span><span class="p">))</span>
</code></pre></div>
<pre><code>Output: 
[{
  "tag": "test__dataset-ex__1",
  "name": "dataset-ex",
  "version": "1",
  "entity_type": "dataset"
}, {
  "tag": "test__labels-ex__1",
  "name": "labels-ex",
  "version": "1",
  "entity_type": "labels"
}]
</code></pre>
<p>If we go back to the diagram, we can see that as shown in the output, version 1 of the model-ex entity is related to dataset-ex in version 1 and labels-ex in version 1.</p>
<h4 id="34-get-entity-relationships">3.4 - Get Entity Relationships<a class="headerlink" href="#34-get-entity-relationships" title="Permanent link">&para;</a></h4>
<p>The <em>get_linked_entities</em> method allows the user to get the list of all relationships that the specific entity has. For this it goes through all versions of the entity and checks the relationships that have been established.</p>
<div class="highlight"><pre><span></span><code><span class="n">entity_relationships</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">get_entity_relationships</span><span class="p">(</span><span class="n">selected_entity</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">selected_entity</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">full_name</span><span class="p">)</span>

<span class="n">count_relationships</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">version</span> <span class="ow">in</span> <span class="n">entity_relationships</span><span class="p">[</span><span class="n">selected_entity</span><span class="o">.</span><span class="n">name</span><span class="p">]:</span>
    <span class="n">count_relationships</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">version</span><span class="o">.</span><span class="n">relationships</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Relationships found: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">count_relationships</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Example of output object:</span><span class="se">\n</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">entity_relationships</span><span class="p">[</span><span class="n">selected_entity</span><span class="o">.</span><span class="n">name</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
</code></pre></div>
<pre><code>Relationships found: 6
Example of output object:
{
  "version": 3,
  "tag": "test__model-ex__3",
  "relationships": [
    {
      "tag": "test__dataset-ex__3",
      "name": "dataset-ex",
      "version": "3",
      "entity_type": "dataset"
    },
    {
      "tag": "test__labels-ex2__2",
      "name": "labels-ex2",
      "version": "2",
      "entity_type": "labels"
    }
  ]
}
</code></pre>
<p>In addition, this command allows the user to define the output format, which can be json (as in the previous example) or CSV. If he wants, he can also define the export_path to export the data to a file.</p>
<p>An example of how to use the generated csv can be seen below:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">entity_relationships_csv</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">get_entity_relationships</span><span class="p">(</span><span class="n">selected_entity</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">selected_entity</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">full_name</span><span class="p">,</span> <span class="n">export_type</span><span class="o">=</span><span class="s1">&#39;csv&#39;</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">entity_relationships_csv</span><span class="p">)</span>
<span class="n">df</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>from_tag</th>
      <th>from_name</th>
      <th>from_version</th>
      <th>from_type</th>
      <th>to_tag</th>
      <th>to_name</th>
      <th>to_version</th>
      <th>to_type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>test__model-ex__3</td>
      <td>model-ex</td>
      <td>3</td>
      <td>model</td>
      <td>test__dataset-ex__3</td>
      <td>dataset-ex</td>
      <td>3</td>
      <td>dataset</td>
    </tr>
    <tr>
      <th>1</th>
      <td>test__model-ex__3</td>
      <td>model-ex</td>
      <td>3</td>
      <td>model</td>
      <td>test__labels-ex2__2</td>
      <td>labels-ex2</td>
      <td>2</td>
      <td>labels</td>
    </tr>
    <tr>
      <th>2</th>
      <td>test__model-ex__2</td>
      <td>model-ex</td>
      <td>2</td>
      <td>model</td>
      <td>test__dataset-ex__1</td>
      <td>dataset-ex</td>
      <td>1</td>
      <td>dataset</td>
    </tr>
    <tr>
      <th>3</th>
      <td>test__model-ex__2</td>
      <td>model-ex</td>
      <td>2</td>
      <td>model</td>
      <td>test__labels-ex__2</td>
      <td>labels-ex</td>
      <td>2</td>
      <td>labels</td>
    </tr>
    <tr>
      <th>4</th>
      <td>test__model-ex__1</td>
      <td>model-ex</td>
      <td>1</td>
      <td>model</td>
      <td>test__dataset-ex__1</td>
      <td>dataset-ex</td>
      <td>1</td>
      <td>dataset</td>
    </tr>
    <tr>
      <th>5</th>
      <td>test__model-ex__1</td>
      <td>model-ex</td>
      <td>1</td>
      <td>model</td>
      <td>test__labels-ex__1</td>
      <td>labels-ex</td>
      <td>1</td>
      <td>labels</td>
    </tr>
  </tbody>
</table>
</div>

<h4 id="35-get-project-entities-relationships">3.5 - Get Project Entities Relationships<a class="headerlink" href="#35-get-project-entities-relationships" title="Permanent link">&para;</a></h4>
<p>Like the previous command, the <em>get_project_entities_relationships</em> command aims to present the entity relationships, but with this single command the user can capture the relationships of all entities that are in the project.</p>
<p>In our case we have 4 versioned entities, so the command will check the relationships of these 4 entities.</p>
<div class="highlight"><pre><span></span><code><span class="n">project_entities_relationships</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">get_project_entities_relationships</span><span class="p">(</span><span class="n">config_repository_name</span><span class="p">)</span>

<span class="n">count_relationships</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">project_entities_relationships</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">version</span> <span class="ow">in</span> <span class="n">project_entities_relationships</span><span class="p">[</span><span class="n">entity</span><span class="p">]:</span>
        <span class="n">count_relationships</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">version</span><span class="o">.</span><span class="n">relationships</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Relationships found: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">count_relationships</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Example of output object:</span><span class="se">\n</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">project_entities_relationships</span><span class="p">[</span><span class="n">entity</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
</code></pre></div>
<pre><code>Relationships found: 10
Example of output object:
{
  "version": 3,
  "tag": "test__model-ex__3",
  "relationships": [
    {
      "tag": "test__dataset-ex__3",
      "name": "dataset-ex",
      "version": "3",
      "entity_type": "dataset"
    },
    {
      "tag": "test__labels-ex2__2",
      "name": "labels-ex2",
      "version": "2",
      "entity_type": "labels"
    }
  ]
}
</code></pre>
<p>Like the previous one, it is possible to export the result in csv.</p>
<div class="highlight"><pre><span></span><code><span class="n">project_entities_relationships_csv</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">get_project_entities_relationships</span><span class="p">(</span><span class="n">config_repository_name</span><span class="p">,</span> <span class="n">export_type</span><span class="o">=</span><span class="s1">&#39;csv&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">project_entities_relationships_csv</span><span class="p">)</span>
<span class="n">df</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>from_tag</th>
      <th>from_name</th>
      <th>from_version</th>
      <th>from_type</th>
      <th>to_tag</th>
      <th>to_name</th>
      <th>to_version</th>
      <th>to_type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>test__labels-ex2__2</td>
      <td>labels-ex2</td>
      <td>2</td>
      <td>labels</td>
      <td>test__dataset-ex__3</td>
      <td>dataset-ex</td>
      <td>3</td>
      <td>dataset</td>
    </tr>
    <tr>
      <th>1</th>
      <td>test__labels-ex2__1</td>
      <td>labels-ex2</td>
      <td>1</td>
      <td>labels</td>
      <td>test__dataset-ex__3</td>
      <td>dataset-ex</td>
      <td>3</td>
      <td>dataset</td>
    </tr>
    <tr>
      <th>2</th>
      <td>test__labels-ex__2</td>
      <td>labels-ex</td>
      <td>2</td>
      <td>labels</td>
      <td>test__dataset-ex__1</td>
      <td>dataset-ex</td>
      <td>1</td>
      <td>dataset</td>
    </tr>
    <tr>
      <th>3</th>
      <td>test__labels-ex__1</td>
      <td>labels-ex</td>
      <td>1</td>
      <td>labels</td>
      <td>test__dataset-ex__1</td>
      <td>dataset-ex</td>
      <td>1</td>
      <td>dataset</td>
    </tr>
    <tr>
      <th>4</th>
      <td>test__model-ex__3</td>
      <td>model-ex</td>
      <td>3</td>
      <td>model</td>
      <td>test__dataset-ex__3</td>
      <td>dataset-ex</td>
      <td>3</td>
      <td>dataset</td>
    </tr>
    <tr>
      <th>5</th>
      <td>test__model-ex__3</td>
      <td>model-ex</td>
      <td>3</td>
      <td>model</td>
      <td>test__labels-ex2__2</td>
      <td>labels-ex2</td>
      <td>2</td>
      <td>labels</td>
    </tr>
    <tr>
      <th>6</th>
      <td>test__model-ex__2</td>
      <td>model-ex</td>
      <td>2</td>
      <td>model</td>
      <td>test__dataset-ex__1</td>
      <td>dataset-ex</td>
      <td>1</td>
      <td>dataset</td>
    </tr>
    <tr>
      <th>7</th>
      <td>test__model-ex__2</td>
      <td>model-ex</td>
      <td>2</td>
      <td>model</td>
      <td>test__labels-ex__2</td>
      <td>labels-ex</td>
      <td>2</td>
      <td>labels</td>
    </tr>
    <tr>
      <th>8</th>
      <td>test__model-ex__1</td>
      <td>model-ex</td>
      <td>1</td>
      <td>model</td>
      <td>test__dataset-ex__1</td>
      <td>dataset-ex</td>
      <td>1</td>
      <td>dataset</td>
    </tr>
    <tr>
      <th>9</th>
      <td>test__model-ex__1</td>
      <td>model-ex</td>
      <td>1</td>
      <td>model</td>
      <td>test__labels-ex__1</td>
      <td>labels-ex</td>
      <td>1</td>
      <td>labels</td>
    </tr>
  </tbody>
</table>
</div>

<p>As expected, all the relationships that were highlighted in the diagram were captured by the API.</p>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">August 25, 2022</span>
      
    
  </small>
</div>




              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../../multiple_projects/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Multiple Projects" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Multiple Projects
            </div>
          </div>
        </a>
      
      
        
        <a href="../../mnist_notebook/mnist_random_forest_api/" class="md-footer__link md-footer__link--next" aria-label="Next: MNIST Random Forest API" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              MNIST Random Forest API
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.tabs", "toc.integrate"], "search": "../../../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
    
  </body>
</html>